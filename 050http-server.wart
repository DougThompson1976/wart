mac w/server-socket(socket port . body)
  `(let ,socket (make-server-socket "127.0.0.1" ,port)
     before close.,socket
       ,@body)

def http-server()
  w/server-socket s :port 4040
    let client-socket socket-accept.s
      w/stdin client-socket
        let (verb url) read.
          prn url
          w/stdout client-socket
            prn "HTTP/1.0 200 OK"
            prn "Content-type: text/plain"
            prn.
            prn "ok"
