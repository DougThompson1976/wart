(def queue()
  (annotate queue (list nil nil 0)))

(def len(x) :type queue
  rep.q.2)

(defcoerce queue cons
  [car (rep _)])

(def empty(x) :type queue
  (empty (as cons x)))

(def enq(q elem)
  (let r rep.q
    (++ rep.q.2)
    (if (empty q)
      (= r.1 (= r.0 list.elem))
      (= r.1 (= (cdr r.1) list.elem)))))

(def deq(q)
  (let r rep.q
    (unless (empty q)
      (-- r.2))
    (pop r.0)))
