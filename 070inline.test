prn.
(test "to-with-expr works"
 :valueof (to-with-expr '(foo a b) (table 'foo (fn(x y) (bar x y))))
 :should be '(with () (with (x a y b) (bar x y))))

(test "to-with-expr handles environment"
 :valueof (to-with-expr '(foo a b) (table 'foo (let z 3 (fn(x y) (bar x y z)))))
 :should be '(with (z 3) (with (x a y b) (bar x y z))))
