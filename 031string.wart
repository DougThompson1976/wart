defcall string(s idx end)
  if (< idx 0)
    = idx (+ len.s idx)
  if (and end (< end 0))
    = end (+ len.s end)
  (string_get s idx end)

defset string(s idx end val)
  if (< idx 0)
    = idx (+ len.s idx)
  if !val
    = val end  end (+ idx 1)
  if (< end 0)
    = end (+ len.s end)
  (string_splice s idx end val)
