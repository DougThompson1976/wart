(test "read works"
  :valueof (making stdin (instring "34 35")
             read.)
  :should be '(34 35))

system "echo abc > _x"
(test "read works on fd"
  :valueof (making stdin (infd:input_fd "_x")
             read.)
  :should be 'abc)
system "rm _x"

(test "multiple reads work"
  :valueof (making stdin (instring "34
35")
             read.
             read.)
  :should be 35)

(test "read-byte works"
  :valueof (w/instring "ab"
             read-byte.
             read-byte.)
  :should be 98)
