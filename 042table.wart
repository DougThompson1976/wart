defcall table(h k default)
  (or (table_get h k) default)

defset table((h k) v)
  `(table_set ,h ,k ,v)

let $table table
  def! table args
    ret h ($table)
      each (k v) pair.args
        (= h.k v)
