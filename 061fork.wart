(require :sb-posix)

; clone a process that stops after executing child
(def fork(child)
  (let pid (sb-posix:fork)
    (if (zerop pid)
      (after
        (call child)
      :do
        (quit)))))

(synonym spawn sb-thread:make-thread
         wait-for-children sb-posix:wait
         getpid sb-posix:getpid)
