let $fork fork
  mac! fork body
    `(when (zero? ,$fork.)
       ,@body
       quit.)

def preforking(n f)
  repeat n
    (fork f.)
  repeat :forever
    (wait_for_child)
    (prn "restart")
    (fork f.)
